<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>PriceCast · MTG Price Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/home.css">
  </head>
  <body class="pc-body pc-body--dark">
    <%= ECR.render("views/partials/_navbar.ecr") %>

    <main class="pc-main pc-main--home">
      <!-- Top: centered search strip -->
      <section class="pc-search-strip pc-search-strip--dark">
        <form class="pc-search-strip-form" action="/search" method="get">
          <input
            class="pc-search-strip-input pc-search-strip-input--dark"
            type="text"
            name="q"
            placeholder="Search by card name or UUID (e.g. &quot;The One Ring&quot;)"
          />
          <button class="pc-btn pc-btn--primary" type="submit">
            Search
          </button>
        </form>
        <p class="pc-search-strip-hint pc-search-strip-hint--dark">
          Demo suggestions:
          <button type="button" class="pc-pill pc-pill--dark">The One Ring</button>
          <button type="button" class="pc-pill pc-pill--dark">Sol Ring</button>
          <button type="button" class="pc-pill pc-pill--dark">Black Lotus</button>
        </p>
        <p class="pc-search-strip-meta">
          Data snapshot:
          <span class="pc-meta-highlight">MTGJSON AllPrices / AtomicCards (e.g. 2025-11-30)</span>.
          Historical window: up to <span class="pc-meta-highlight">90 days</span> per card.
        </p>
      </section>

      <!-- Hero: overview + how-it-works (left) and demos (right) -->
      <section id="overview" class="pc-hero pc-hero--dark">
        <!-- Left: overview + HOW IT WORKS -->
        <div class="pc-hero-left">
          <h1 class="pc-hero-title">
            PriceCast helps you read the story behind MTG card prices.
          </h1>
          <p class="pc-hero-subtitle">
            This demo takes a slice of MTGJSON data and fits simple regression
            models per card, so you can see how prices are trending rather than
            just staring at a single number.
          </p>

          <div id="how-it-works" class="pc-hero-how">
            <h2 class="pc-hero-how-title">How PriceCast works (demo)</h2>
            <div class="pc-hero-how-grid">
              <div class="pc-info-card">
                <div class="pc-info-title">1. Ingest MTGJSON</div>
                <p class="pc-info-text">
                  Use MTGJSON datasets (AtomicCards, AllPrices, etc.) and extract a focused
                  subset of cards and their price histories.
                </p>
              </div>
              <div class="pc-info-card">
                <div class="pc-info-title">2. Build price series</div>
                <p class="pc-info-text">
                  Construct clean time series per card and store them in a processed index
                  that the web app can load quickly.
                </p>
              </div>
              <div class="pc-info-card">
                <div class="pc-info-title">3. Fit simple models</div>
                <p class="pc-info-text">
                  Fit a linear regression per card over a recent window (up to 90 days)
                  to estimate trend and a demo predicted value.
                </p>
              </div>
              <div class="pc-info-card">
                <div class="pc-info-title">4. Present the story</div>
                <p class="pc-info-text">
                  Show a headline price, a visual history, and short context about what the
                  model is and isn’t capturing—rather than just a raw number.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Right: featured card + compact demo tiles -->
        <div id="demos" class="pc-hero-right">
          <!-- Featured demo card -->
          <div class="pc-feature-card">
            <img
              class="pc-feature-card-image"
              src="/images/ltr-246-the-one-ring.png"
              alt="The One Ring MTG Card"
            />
            <div class="pc-feature-card-body">
              <div class="pc-feature-card-name">The One Ring</div>
              <div class="pc-feature-card-meta">
                Tales of Middle-earth (LTR) · #246 · Mythic
              </div>
              <div class="pc-feature-card-row">
                <span class="pc-feature-card-label">Demo predicted price</span>
                <span class="pc-feature-card-price">$72.34</span>
              </div>
              <a href="/card/demo-the-one-ring" class="pc-btn pc-btn--outline">
                Open card demo
              </a>
            </div>
          </div>

          <!-- Compact list of other demo cards -->
          <section class="pc-demo-section">
            <h2 class="pc-demo-title">Other demo cards</h2>
            <p class="pc-demo-subtitle">
              Jump straight into a few curated cards that highlight different price behaviors.
            </p>

            <div class="pc-demo-grid">
              <% demo_cards.each do |card| %>
                <a class="pc-demo-card-tile" href="<%= card[:path] %>">
                  <div class="pc-demo-card-header">
                    <div class="pc-demo-card-name"><%= card[:name] %></div>
                    <div class="pc-demo-card-set"><%= card[:set_line] %></div>
                  </div>

                  <div class="pc-demo-card-footer">
                    <span class="pc-demo-card-label">Predicted</span>
                    <span class="pc-demo-card-price"><%= card[:predicted_price] %></span>
                  </div>
                </a>
              <% end %>
            </div>
          </section>
        </div>
      </section>
    </main>

    <footer class="pc-footer pc-footer--dark">
      <div class="pc-footer-inner">
        <span>PriceCast · MTG price demo</span>
        <span class="pc-footer-tags">
          Built with Crystal · Kemal · MTGJSON
        </span>
      </div>
    </footer>
  </body>
</html>
